webpackJsonp([3],{144:function(e,o,s){var t,r;s(425),t=s(420);var i=s(457);r=t=t||{},"object"!=typeof t.default&&"function"!=typeof t.default||(r=t=t.default),"function"==typeof r&&(r=r.options),r.render=i.render,r.staticRenderFns=i.staticRenderFns,r._scopeId="data-v-30d2b41a",e.exports=t},420:function(e,o,s){"use strict";(function(e){Object.defineProperty(o,"__esModule",{value:!0});var t=s(66),r=(s.n(t),Object.assign||function(e){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e});o.default={name:"Login",data:function(){return{self:this,user:{login:"",password:""},isNameError:!1,isPasswordError:!1,isError:!1,loginBtn:"登录",isLogin:!1,showLogo:!0,formPadding:null}},computed:{userNamePlaceholder:function(){return this.errors.has("login")?(this.isNameError=!0,this.errors.first("login")):"用户名/邮箱/电话"},passwordPlaceholder:function(){return this.errors.has("password")?(this.isPasswordError=!0,this.errors.first("password")):"密码"}},mounted:function(){"401"==this.$route.params.code&&e.get("/token").then(function(e){Laravel.csrfToken=e.data}).catch(function(e){200!=e.status&&(this.loginBtn="登录",this.isLogin=!1,alert("token获取失败"))}),this.$mySpinner(!1)},methods:r({},s.i(t.mapMutations)(["setUserInfo"]),{login:function(){var o=this;return this.showLogoFn(),this.$validator.validateAll(),!this.errors.any()&&(this.loginBtn="登录中...",this.isLogin=!0,e.post("/login",this.user).then(function(e){"用户名或密码错误"==e.data?(o.isError=!0,o.loginBtn="登录",o.isLogin=!1):o.$router.push("/webapp")}).catch(function(e){200!=e.status&&(this.loginBtn="登录",this.isLogin=!1,this.$alert("连接出错，请重新登录","e"))}),void 0)},hideLogo:function(){this.showLogo=!1},showLogoFn:function(){this.showLogo=!0}})}}).call(o,s(67))},425:function(e,o){},457:function(e,o){e.exports={render:function(){var e=this,o=e.$createElement,s=e._self._c||o;return s("div",{staticClass:"content",attrs:{id:"mynprogress"}},[s("transition",{attrs:{name:"hide-logo",mode:"out-in"}},[e.showLogo?s("div",{key:"logo",staticClass:"logo"}):e._e(),e.showLogo?e._e():s("div",{key:"logo-hide",staticClass:"logo-hide"})]),s("form",{style:e.formPadding,on:{submit:function(o){o.preventDefault(),e.login(o)}}},[s("ul",[s("li",[e.isError?s("div",{staticClass:"err-tip"},[e._v("用户名或密码错误")]):e._e(),s("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"touchstart",rawName:"v-touchstart:hideLogo",value:[e.self],expression:"[self]",arg:"hideLogo"},{name:"model",rawName:"v-model",value:e.user.login,expression:"user.login",arg:"hideLogo"},{name:"validate",rawName:"v-validate.initial",value:e.user.login,expression:"user.login",arg:"hideLogo",modifiers:{initial:!0}}],class:{red:e.isNameError},attrs:{"data-vv-rules":"required","data-vv-as":"用户名",placeholder:e.userNamePlaceholder,name:"login",type:"text"},domProps:{value:e._s(e.user.login)},on:{input:function(o){o.target.composing||(e.user.login=o.target.value)}}}),s("span")]),s("li",[s("input",{directives:[{name:"touchstart",rawName:"v-touchstart:hideLogo",value:[e.self],expression:"[self]",arg:"hideLogo"},{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password",arg:"hideLogo"},{name:"validate",rawName:"v-validate.initial",value:e.user.password,expression:"user.password",arg:"hideLogo",modifiers:{initial:!0}}],class:{red:e.isPasswordError},attrs:{"data-vv-rules":"required","data-vv-as":"密码",placeholder:e.passwordPlaceholder,name:"password",type:"password"},domProps:{value:e._s(e.user.password)},on:{input:function(o){o.target.composing||(e.user.password=o.target.value)}}}),s("span")])]),s("div",{staticClass:"login-btn"},[s("a",[s("button",{attrs:{type:"submit",disabled:e.isLogin}},[e._v(e._s(e.loginBtn))])])])])],1)},staticRenderFns:[]}}});